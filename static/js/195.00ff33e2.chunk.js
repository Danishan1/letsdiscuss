"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[195],{726:(e,t,s)=>{s.d(t,{$:()=>i});s(43);const a="Button_btn__T55A1";var l=s(579);const i=e=>{let{text:t,onClick:s,style:i={}}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:a,style:i,onClick:e=>s(e),children:t})})}},195:(e,t,s)=>{s.r(t),s.d(t,{FormSection2:()=>p});var a=s(43),l=s(417),i=s(726);const o="OtpField_otpInputContainer__JNkOG",n="OtpField_otpInput__PV6HC";var c=s(579);const r=e=>{let{length:t=6,onChange:s}=e;const[l,i]=(0,a.useState)(Array(t).fill("")),r=e=>{const a=e.clipboardData.getData("Text").split("");a.length===t&&(i([...a]),s(a.join("")))},u=e=>{e.target.select()};return a.useEffect((()=>{const e=l.join("");e.length===t&&s(e)}),[l,s,t]),(0,c.jsx)("div",{className:o,children:l.map(((e,t)=>(0,c.jsx)("input",{type:"text",className:n,maxLength:"1",value:e,onChange:e=>((e,t)=>{isNaN(e.value)||(i([...l.map(((s,a)=>a===t?e.value:s))]),e.nextSibling&&e.nextSibling.focus())})(e.target,t),onKeyDown:e=>((e,t)=>{"Backspace"===e.key&&(""!==l[t]?i([...l.map(((e,s)=>s===t?"":e))]):e.target.previousSibling&&(e.target.previousSibling.focus(),i([...l.map(((e,s)=>s===t-1?"":e))])))})(e,t),onFocus:u,onPaste:r},t)))})};var u=s(213),d=s(547);const p=e=>{let{formData:t,setFormData:s,showAlert:o,setFormFillStep:n}=e;const[p,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)(!1),[y,x]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[S,C]=(0,a.useState)(""),[P,N]=(0,a.useState)("");(0,a.useEffect)((()=>{x(!1)}),[S]),(0,a.useEffect)((()=>{b(!1)}),[P]);const O=async(e,t,s)=>{try{return(await u.A.post("http://localhost:5000/api/auth/verifyOTP",{otp:e,type:t,verificationId:s})).data.isValid}catch(a){return console.log(a),!1}};return v?(0,c.jsx)(d.A,{position:"absolute"}):(0,c.jsxs)("div",{className:"".concat(l.A.formSection," ").concat(l.A.formSection2),children:[(0,c.jsx)("p",{className:"colorCyan boldL2",style:{textAlign:"center"},children:"Verify Your Mobile & Email ID"}),(0,c.jsxs)("div",{children:[!p&&(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"colorCyan boldL2",children:"Verify Mobile No : "}),t.mobile]}),p?(0,c.jsx)("p",{className:"colorBlue",children:"Mobile OTP Verified."}):(0,c.jsx)(r,{onChange:async e=>{C(e);await O(e,"mobile",t.email)?p||(o("Mobile OTP verified successfully!","success"),h(!0),x(!1)):y||(o("Wrong Mobile OTP!","error"),h(!1),x(!0))}})]}),(0,c.jsxs)("div",{children:[!m&&(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"colorCyan boldL2",children:"Verify Email: "}),t.email]}),m?(0,c.jsx)("p",{className:"colorBlue",children:"Email OTP Verified."}):(0,c.jsx)(r,{onChange:async e=>{N(e);await O(e,"email",t.email)?m||(o("Email OTP verified successfully!","success"),f(!0),b(!1)):g||(o("Wrong Email OTP!","error"),f(!1),b(!0))}})]}),(0,c.jsx)("div",{className:l.A.btnRapper,children:(0,c.jsx)(i.$,{text:"Generate ID & Passcode",onClick:async e=>{e.preventDefault(),p&&m?(j(!0),await(async()=>{try{const e=await u.A.post("http://localhost:5000/api/auth/register",{...t});"SUCC"===e.data.code&&(s((t=>({...t,userId:e.data.userId,passcode:e.data.password}))),o("Registration Successful!","success"),n(2))}catch(e){console.log(e),o("Registration Failed!","error")}finally{j(!1)}})()):o(p||m?p?"Please verify Email OTP.":"Please verify Mobile OTP.":"Please verify both Mobile and Email OTPs.","error")}})})]})}}}]);
//# sourceMappingURL=195.00ff33e2.chunk.js.map