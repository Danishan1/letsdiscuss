{"version":3,"file":"static/js/195.00ff33e2.chunk.js","mappings":"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","sources":["webpack://client/./src/component/Registration/css/Button.module.css?b048","component/Registration/js/Button.jsx","webpack://client/./src/component/Registration/css/OtpField.module.css?d1e5","component/Registration/js/OtpField.jsx","component/Registration/js/FormSection2.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"Button_btn__T55A1\"};","import React from \"react\";\r\nimport styles from \"../css/Button.module.css\";\r\n\r\n////////////////////////////////////////////////////////////////\r\n// Code : ABAB005\r\nexport const Button = ({ text, onClick, style = {} }) => {\r\n  return (\r\n    <>\r\n      <div className={styles.btn} style={style} onClick={(e) => onClick(e)}>\r\n        {text}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"otpInputContainer\":\"OtpField_otpInputContainer__JNkOG\",\"otpInput\":\"OtpField_otpInput__PV6HC\"};","import React, { useState } from \"react\";\r\nimport style from \"../css/OtpField.module.css\";\r\n\r\nconst OtpField = ({ length = 6, onChange }) => {\r\n  const [otp, setOtp] = useState(Array(length).fill(\"\"));\r\n\r\n  const handleChange = (element, index) => {\r\n    if (isNaN(element.value)) return;\r\n    setOtp([...otp.map((d, idx) => (idx === index ? element.value : d))]);\r\n    if (element.nextSibling) {\r\n      element.nextSibling.focus();\r\n    }\r\n  };\r\n\r\n  const handlePaste = (e) => {\r\n    const data = e.clipboardData.getData(\"Text\").split(\"\");\r\n    if (data.length === length) {\r\n      setOtp([...data]);\r\n      onChange(data.join(\"\"));\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e, index) => {\r\n    if (e.key === \"Backspace\") {\r\n      if (otp[index] !== \"\") {\r\n        setOtp([...otp.map((d, idx) => (idx === index ? \"\" : d))]);\r\n      } else if (e.target.previousSibling) {\r\n        e.target.previousSibling.focus();\r\n        setOtp([...otp.map((d, idx) => (idx === index - 1 ? \"\" : d))]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFocus = (e) => {\r\n    e.target.select();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const myOtp = otp.join(\"\");\r\n    if (myOtp.length === length) onChange(myOtp);\r\n  }, [otp, onChange, length]);\r\n\r\n  return (\r\n    <div className={style.otpInputContainer}>\r\n      {otp.map((data, index) => (\r\n        <input\r\n          key={index}\r\n          type=\"text\"\r\n          className={style.otpInput}\r\n          maxLength=\"1\"\r\n          value={data}\r\n          onChange={(e) => handleChange(e.target, index)}\r\n          onKeyDown={(e) => handleKeyDown(e, index)}\r\n          onFocus={handleFocus}\r\n          onPaste={handlePaste}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OtpField;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport style from \"../css/RegisterForm.module.css\";\r\nimport { Button } from \"./Button\";\r\nimport OtpField from \"./OtpField\";\r\nimport axios from \"axios\";\r\nimport Loading from \"../../SpecialPages/js/Loading\";\r\n\r\nexport const FormSection2 = ({\r\n  formData,\r\n  setFormData,\r\n  showAlert,\r\n  setFormFillStep,\r\n}) => {\r\n  const [mobileVerified, setMobileVerified] = useState(false);\r\n  const [emailVerified, setEmailVerified] = useState(false);\r\n  const [mobileErrorShown, setMobileErrorShown] = useState(false);\r\n  const [emailErrorShown, setEmailErrorShown] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [mobileOtp, setMobileOtp] = useState(\"\");\r\n  const [emailOtp, setEmailOtp] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setMobileErrorShown(false);\r\n  }, [mobileOtp]);\r\n\r\n  useEffect(() => {\r\n    setEmailErrorShown(false);\r\n  }, [emailOtp]);\r\n\r\n  const verifyOTP = async (otp, type, verificationId) => {\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://localhost:5000/api/auth/verifyOTP\",\r\n        {\r\n          otp,\r\n          type,\r\n          verificationId,\r\n        }\r\n      );\r\n\r\n      return response.data.isValid;\r\n    } catch (error) {\r\n      console.log(error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const register = async () => {\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://localhost:5000/api/auth/register\",\r\n        {\r\n          ...formData,\r\n        }\r\n      );\r\n\r\n      if (response.data.code === \"SUCC\") {\r\n        setFormData((prevFormData) => ({\r\n          ...prevFormData,\r\n          userId: response.data.userId,\r\n          passcode: response.data.password,\r\n        }));\r\n        showAlert(\"Registration Successful!\", \"success\");\r\n        setFormFillStep(2);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      showAlert(\"Registration Failed!\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const move2Section3 = async (e) => {\r\n    e.preventDefault();\r\n    if (mobileVerified && emailVerified) {\r\n      setLoading(true); // Set loading state to true\r\n      await register(); // Register user\r\n    } else {\r\n      if (!mobileVerified && !emailVerified)\r\n        showAlert(\"Please verify both Mobile and Email OTPs.\", \"error\");\r\n      else if (!mobileVerified) showAlert(\"Please verify Mobile OTP.\", \"error\");\r\n      else showAlert(\"Please verify Email OTP.\", \"error\");\r\n    }\r\n  };\r\n\r\n  const handleMobileChange = async (otp) => {\r\n    setMobileOtp(otp);\r\n    const isVerified = await verifyOTP(otp, \"mobile\", formData.email);\r\n    if (isVerified) {\r\n      if (!mobileVerified) {\r\n        showAlert(\"Mobile OTP verified successfully!\", \"success\");\r\n        setMobileVerified(true);\r\n        setMobileErrorShown(false);\r\n      }\r\n    } else if (!mobileErrorShown) {\r\n      showAlert(\"Wrong Mobile OTP!\", \"error\");\r\n      setMobileVerified(false);\r\n      setMobileErrorShown(true);\r\n    }\r\n  };\r\n\r\n  const handleEmailChange = async (otp) => {\r\n    setEmailOtp(otp);\r\n    const isVerified = await verifyOTP(otp, \"email\", formData.email);\r\n    if (isVerified) {\r\n      if (!emailVerified) {\r\n        showAlert(\"Email OTP verified successfully!\", \"success\");\r\n        setEmailVerified(true);\r\n        setEmailErrorShown(false);\r\n      }\r\n    } else if (!emailErrorShown) {\r\n      showAlert(\"Wrong Email OTP!\", \"error\");\r\n      setEmailVerified(false);\r\n      setEmailErrorShown(true);\r\n    }\r\n  };\r\n\r\n  if (loading) return <Loading position=\"absolute\" />;\r\n\r\n  return (\r\n    <div className={`${style.formSection} ${style.formSection2}`}>\r\n      <p className=\"colorCyan boldL2\" style={{ textAlign: \"center\" }}>\r\n        Verify Your Mobile & Email ID\r\n      </p>\r\n      <div>\r\n        {!mobileVerified && (\r\n          <p>\r\n            <span className=\"colorCyan boldL2\">Verify Mobile No : </span>\r\n            {formData.mobile}\r\n          </p>\r\n        )}\r\n        {!mobileVerified ? (\r\n          <OtpField onChange={handleMobileChange} />\r\n        ) : (\r\n          <p className=\"colorBlue\">Mobile OTP Verified.</p>\r\n        )}\r\n      </div>\r\n      <div>\r\n        {!emailVerified && (\r\n          <p>\r\n            <span className=\"colorCyan boldL2\">Verify Email: </span>\r\n            {formData.email}\r\n          </p>\r\n        )}\r\n        {!emailVerified ? (\r\n          <OtpField onChange={handleEmailChange} />\r\n        ) : (\r\n          <p className=\"colorBlue\">Email OTP Verified.</p>\r\n        )}\r\n      </div>\r\n      <div className={style.btnRapper}>\r\n        <Button text={\"Generate ID & Passcode\"} onClick={move2Section3} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["Button","_ref","text","onClick","style","_jsx","_Fragment","children","className","styles","e","length","onChange","otp","setOtp","useState","Array","fill","handlePaste","data","clipboardData","getData","split","join","handleFocus","target","select","React","myOtp","map","index","type","maxLength","value","handleChange","element","isNaN","d","idx","nextSibling","focus","onKeyDown","handleKeyDown","key","previousSibling","onFocus","onPaste","FormSection2","formData","setFormData","showAlert","setFormFillStep","mobileVerified","setMobileVerified","emailVerified","setEmailVerified","mobileErrorShown","setMobileErrorShown","emailErrorShown","setEmailErrorShown","loading","setLoading","mobileOtp","setMobileOtp","emailOtp","setEmailOtp","useEffect","verifyOTP","async","verificationId","axios","post","isValid","error","console","log","Loading","position","_jsxs","concat","formSection","formSection2","textAlign","mobile","OtpField","email","btnRapper","preventDefault","response","code","prevFormData","userId","passcode","password","register"],"sourceRoot":""}